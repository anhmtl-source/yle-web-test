<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YLE Listening – Level 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style-dragdrop.css">

    <style>
    /* Popup xác nhận nộp bài - khủng long 3D (dùng riêng cho Listening) */
    .rw-confirm-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.25);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 3000;
    }
    .rw-confirm-overlay.active {
      display: flex;
      backdrop-filter: blur(6px);
    }
    .rw-confirm-modal {
      position: relative;
      background: radial-gradient(circle at 30% 20%, #fff3c4, #ffd569 60%, #f7b947 100%);
      border-radius: 26px;
      padding: 40px 32px 30px;
      min-width: 340px;
      text-align: center;
      box-shadow:
        0 25px 45px rgba(0,0,0,0.4),
        0 8px 20px rgba(0,0,0,0.25),
        inset 0 0 18px rgba(255,255,255,0.75);
      border: 3px solid transparent;
      background-clip: padding-box;
    }
    .rw-confirm-modal::before {
      content: "";
      position: absolute;
      inset: -4px;
      border-radius: 30px;
      background: linear-gradient(135deg, #fff1a8, #ff9f40, #ffdd8c);
      z-index: -1;
    }
    .rw-confirm-title {
      position: absolute;
      top: -22px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(145deg, #ffffff, #ffe7a3);
      padding: 10px 32px;
      border-radius: 20px;
      font-weight: 800;
      font-size: 17px;
      color: #d4002f;
      box-shadow:
        0 10px 25px rgba(0,0,0,0.22),
        inset 0 0 10px rgba(255,255,255,0.6);
    }
    .rw-confirm-close {
      position: absolute;
      top: -16px;
      right: -16px;
      background: linear-gradient(135deg, #ff5f5f, #cc0000);
      width: 34px;
      height: 34px;
      border-radius: 50%;
      border: none;
      color: #fff;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      box-shadow:
        0 10px 20px rgba(255,0,0,0.55),
        inset 0 0 10px rgba(255,255,255,0.4);
      transition: 0.15s ease;
    }
    .rw-confirm-close:hover {
      transform: translateY(-2px) scale(1.08);
      box-shadow:
        0 14px 28px rgba(255,0,0,0.7),
        inset 0 0 12px rgba(255,255,255,0.6);
    }
    .rw-confirm-message {
      margin-top: 12px;
      font-size: 17px;
      color: #14532d;
      text-shadow: 0 1px 0 #fff;
    }
    .rw-confirm-submit {
      margin-top: 24px;
      padding: 14px 38px;
      font-size: 16px;
      font-weight: 700;
      border-radius: 30px;
      color: #fff;
      background: linear-gradient(145deg, #ff9d2f, #ff6a00 60%, #e25500);
      box-shadow:
        0 18px 35px rgba(255,111,0,0.55),
        0 6px 12px rgba(0,0,0,0.25),
        inset 0 0 12px rgba(255,255,255,0.5);
      border: none;
      cursor: pointer;
      transition: 0.2s ease;
    }
    .rw-confirm-submit:hover {
      transform: translateY(-4px) scale(1.06);
      box-shadow:
        0 25px 40px rgba(255,111,0,0.75),
        inset 0 0 14px rgba(255,255,255,0.7);
    }
    .rw-confirm-submit:active {
      transform: translateY(0px) scale(0.97);
      box-shadow:
        0 10px 22px rgba(255,111,0,0.5),
        inset 0 0 8px rgba(255,255,255,0.4);
    }
    
    /* Pháo hoa nhẹ khi popup khiên Listening xuất hiện */
    .shield-overlay.active::before,
    .shield-overlay.active::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,0.9) 0, transparent 40%),
        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.9) 0, transparent 40%),
        radial-gradient(circle at 15% 80%, rgba(255,255,255,0.9) 0, transparent 40%),
        radial-gradient(circle at 85% 75%, rgba(255,255,255,0.9) 0, transparent 40%);
      mix-blend-mode: screen;
      opacity: 0;
      animation: fireworks 1.2s ease-out forwards;
    }
    @keyframes fireworks {
      0% {
        opacity: 0;
        transform: scale(0.6);
      }
      40% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(1.3);
      }
    }
</style>
</head>
<body>
<div class="exam-shell">

    <header class="exam-header compact">
    <div class="exam-title-block">
        <h1>Level 1 YLE Listening – Practice Test</h1>
            </div>

    <div class="timer-3d">
        <div class="timer-3d-inner">
            <div class="timer-3d-face">
                <span id="globalTimer">25:00</span>
            </div>
        </div>
    </div>
</header>


    <!-- NAV GIỮA 4 PARTS -->
    <nav class="part-nav">
        <button data-part="1" class="active">Part 1</button>
        <button data-part="2">Part 2</button>
        <button data-part="3">Part 3</button>
        <button data-part="4">Part 4</button>
    </nav>

    <!-- ================= PART 1 ================= -->
    <section id="part1" class="part-panel">
        <h2>PART 1 – Listen and drag the names</h2>
        <p>Listen and drag the names onto the correct people in the picture. There is one example.</p>

        <!-- Audio Part 1: sửa src cho đúng file của em -->
        <audio id="audioP1" src="Media/audio/01. Starter 1 - Test 1 - Part 1.mp3"></audio>

        <div class="yl-audio-player" data-audio="audioP1">
            <button class="yl-play-btn" type="button"></button>
            <span class="yl-time">00:00 / 00:00</span>
            <div class="yl-bar">
                <div class="yl-bar-fill"></div>
            </div>
        </div>

        <div class="p1-layout">
            <!-- Tranh lớn -->
            <div class="p1-image-wrapper">
                <!-- sửa src cho đúng hình Part 1 -->
                <img src="Media/images/Starters- LISTENING/s1t1p1.jpg" alt="Part 1 picture" class="main-img">

                <!-- Các drop-box đặt đúng vị trí nhân vật, data-answer là tên đúng -->
                <div class="drop-box" data-answer="Grace" style="top: 30%; left: 87%;"></div>
                <div class="drop-box" data-answer="Dan" style="top: 25%; left: 40%;"></div>
                <div class="drop-box" data-answer="Alex"  style="top: 75%; left: 46%;"></div>
                <div class="drop-box" data-answer="Eva" style="top: 50%; left: 15%;"></div>
                <div class="drop-box" data-answer="Alice"  style="top: 20%; left: 5%;"></div>
            </div>

            <!-- Ngân hàng tên để kéo -->
            <div class="p1-name-bank">
                <div class="name-pill" draggable="true" data-name="Dan">Dan</div>
                <div class="name-pill" draggable="true" data-name="Eva">Eva</div>
                <div class="name-pill" draggable="true" data-name="Grace">Grace</div>
                <div class="name-pill" draggable="true" data-name="Alex">Alex</div>
                <div class="name-pill" draggable="true" data-name="Alice">Alice</div>
                <div class="name-pill" draggable="true" data-name="David">David</div>
                <div class="name-pill" draggable="true" data-name="Mark">Mark</div>
            </div>
        </div>
    </section>

    <!-- ================= PART 2 ================= -->
    <section id="part2" class="part-panel hidden">
        <h2>PART 2 – Listen and write a name or a number</h2>
        <p>Listen and write a name or a number in each answer. There are two examples.</p>

        <!-- Audio Part 2 -->
        <audio id="audioP2" src="Media/audio/02. Starter 1 - Test 1 - Part 2.mp3"></audio>
        <div class="yl-audio-player" data-audio="audioP2">
            <button class="yl-play-btn" type="button"></button>
            <span class="yl-time">00:00 / 00:00</span>
            <div class="yl-bar">
                <div class="yl-bar-fill"></div>
            </div>
        </div>

        <div class="p2-layout">
            <div class="p2-image-card">
                <!-- sửa hình Part 2 -->
                <img src="Media/images/Starters- LISTENING/s1t1p2.jpg" alt="Part 2 picture" class="main-img">
            </div>

            <div class="p2-questions">
                <!-- Ví dụ – sửa câu hỏi + data-answer cho đúng đề của em -->
                <div class="p2-row example">
                    <span class="p2-label">Example: What is the boy’s name?</span>
                    <input type="text" value="Tom" disabled>
                </div>

                <div class="p2-row example">
                    <span class="p2-label">Example: How old is he?</span>
                    <input type="text" value="11" disabled>
                </div>

                <div class="p2-row" data-answer="Ben">
                    <span class="p2-label">1. 1. What is Tom’s friend’s name? </span>
                    <input type="text" id="p2q1" placeholder="name / number">
                </div>

                <div class="p2-row" data-answer="12">
                    <span class="p2-label">2. How old is Tom’s friend?</span>
                    <input type="text" id="p2q2" placeholder="name / number">
                </div>

                <div class="p2-row" data-answer="5">
                    <span class="p2-label">3. How many brothers has Tom’s friend got?</span>
                    <input type="text" id="p2q3" placeholder="name / number">
                </div>

                <div class="p2-row" data-answer="18">
                    <span class="p2-label">4. How many children are in Tom’s class?</span>
                    <input type="text" id="p2q4" placeholder="name / number">
                </div>

                <div class="p2-row" data-answer="Hall">
                    <span class="p2-label">5. What is the name of Tom’s teacher? Mrs</span>
                    <input type="text" id="p2q5" placeholder="name / number">
                </div>
            </div>
        </div>
    </section>

    <!-- ================= PART 3 ================= -->
    <section id="part3" class="part-panel hidden">
  <h2>PART 3 – Listen and tick (✓) the box. There is one example.</h2>

  <!-- Audio Part 3 -->
  <audio id="audioP3" src="Media/audio/03. Starter 1 - Test 1 - Part 3.mp3"></audio>

  <!-- AUDIO -->
  <div class="yl-audio-player" data-audio="audioP3">
    <button class="yl-play-btn" type="button"></button>
    <span class="yl-time">00:00 / 00:00</span>
    <div class="yl-bar"><div class="yl-bar-fill"></div></div>
  </div>

  <!-- LAYOUT 2 CỘT -->
  <div class="p3-container">

    <!-- ===== CỘT TRÁI – CỐ ĐỊNH ===== -->
    <div class="p3-left">
      <h3 class="p3-left-title">Example</h3>

      <div class="p3-example">
        <p class="p3-question-text">Which is Kim’s bag?</p>

        <div class="p3-example-options">

          <!-- A -->
          <label class="p3-option">
            <input type="radio" checked disabled>
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_ex_a.png"></span>
            <span class="p3-letter-wrap">
              <span class="p3-bullet"></span>
              <span class="p3-letter">A</span>
            </span>
          </label>

          <!-- B -->
          <label class="p3-option">
            <input type="radio" disabled>
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_ex_b.png"></span>
            <span class="p3-letter-wrap">
              <span class="p3-bullet"></span>
              <span class="p3-letter">B</span>
            </span>
          </label>

          <!-- C -->
          <label class="p3-option">
            <input type="radio" disabled>
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_ex_c.png"></span>
            <span class="p3-letter-wrap">
              <span class="p3-bullet"></span>
              <span class="p3-letter">C</span>
            </span>
          </label>

        </div>
      </div>
    </div>

    <!-- ===== VẠCH NGĂN ===== -->
    <div class="p3-divider"></div>

    <!-- ===== CỘT PHẢI – CUỘN ===== -->
    <div class="p3-right">

      <!-- ==== Q1 ==== -->
      <div class="p3-card" data-q="1"> 
        <p class="p3-q-title">1. What is Anna taking to school?</p>

        <div class="p3-options-row">

          <label class="p3-option">
            <input type="radio" name="p3_q1" value="A">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q1_a.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>A</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q1" value="B">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q1_b.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>B</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q1" value="C">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q1_c.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>C</span>
          </label>

        </div>
      </div>
     <!-- ==== Q2 ==== -->
      <div class="p3-card" data-q="2"> 
        <p class="p3-q-title">2. Which is Bill’s dad?</p>

        <div class="p3-options-row">

          <label class="p3-option">
            <input type="radio" name="p3_q2" value="A">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q2_a.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>A</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q2" value="B">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q2_b.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>B</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q2" value="C">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q2_c.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>C</span>
          </label>

        </div>
      </div>
      <!-- ==== Q3 ==== -->
      <div class="p3-card" data-q="3"> 
        <p class="p3-q-title">3. What would Sam like to do?</p>

        <div class="p3-options-row">

          <label class="p3-option">
            <input type="radio" name="p3_q3" value="A">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q3_a.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>A</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q3" value="B">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q3_b.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>B</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q3" value="C">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q3_c.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>C</span>
          </label>

        </div>
      </div>
     <!-- ==== Q4 ==== -->
      <div class="p3-card" data-q="4"> 
        <p class="p3-q-title">4. Which is Jill’s bedroom?</p>

        <div class="p3-options-row">

          <label class="p3-option">
            <input type="radio" name="p3_q4" value="A">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q4_a.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>A</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q4" value="B">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q4_b.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>B</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q4" value="C">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q4_c.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>C</span>
          </label>

        </div>
      </div>
     <!-- ==== Q5 ==== -->
      <div class="p3-card" data-q="5"> 
        <p class="p3-q-title">5. Which is Nick’s brother?</p>

        <div class="p3-options-row">

          <label class="p3-option">
            <input type="radio" name="p3_q5" value="A">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q5_a.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>A</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q5" value="B">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q5_b.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>B</span>
          </label>

          <label class="p3-option">
            <input type="radio" name="p3_q5" value="C">
            <span class="p3-img"><img src="Media/images/Starters- LISTENING/starters_p3_q5_c.png"></span>
            <span class="p3-letter-wrap"><span class="p3-bullet"></span>C</span>
          </label>

        </div>
      </div>
      <!-- Q2–Q5 anh chỉ rút gọn -->
      <!-- Copy giống cấu trúc Q1, thay câu và ảnh -->

    </div>
  </div>

</section>

    <!-- ================= PART 4 ================= -->
    <section id="part4" class="part-panel hidden">
        <h2>PART 4 – Listen and colour</h2>
        <p>Listen and choose the correct colour for each object. There is one example.</p>

        <!-- Audio Part 4 -->
        <audio id="audioP4" src="Media/audio/04. Starter 1 - Test 1 - Part 4.mp3"></audio>
        <div class="yl-audio-player" data-audio="audioP4">
            <button class="yl-play-btn" type="button"></button>
            <span class="yl-time">00:00 / 00:00</span>
            <div class="yl-bar">
                <div class="yl-bar-fill"></div>
            </div>
        </div>

                <div class="p4-layout">
            <!-- BÊN TRÁI: TRANH TÔ MÀU -->
            <div class="p4-left">
                <div class="p4-image-card">
                    <!-- giữ nguyên tranh Part 4 -->
                    <img src="Media/images/Starters- LISTENING/s1t1p4.jpg" alt="Part 4 picture">
      <!-- Các vùng trống để tô màu (vị trí top/left tính theo %) -->
      <!-- trên tay cậu bé (Pink) -->
      <div class="p4-drop-zone" data-slot="1" style="top: 28%; left: 55%;"></div>

      <!-- kem trên bàn (yellow) -->
      <div class="p4-drop-zone" data-slot="2" style="top: 56%; left: 56%;"></div>

      <!-- kem trước cửa (orange) -->
      <div class="p4-drop-zone" data-slot="3" style="top: 62%; left: 10%;"></div>

      <!-- trước con mèo (green) -->
      <div class="p4-drop-zone" data-slot="4" style="top: 85%; left: 30%;"></div>

      <!-- trước bà mẹ (blue) -->
      <div class="p4-drop-zone" data-slot="5" style="top: 80%; left: 15%;"></div>

                </div>
            </div>

            <!-- VÁCH NGĂN -->
            <div class="p4-divider"></div>

            <!-- BÊN PHẢI: CRAYON KÉO THẢ -->
            <div class="p4-right">
                <div class="p4-right">
    <!-- GREEN -->
    <div class="p4-crayon" data-color="green" style="--crayon-color:#22c55e;">
        <img src="Media/images/icons/green.png" alt="green crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">green</span>
    </div>

    <!-- RED -->
    <div class="p4-crayon" data-color="red" style="--crayon-color:#ef4444;">
        <img src="Media/images/icons/red.png" alt="red crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">red</span>
    </div>

    <!-- PURPLE -->
    <div class="p4-crayon" data-color="purple" style="--crayon-color:#a855f7;">
        <img src="Media/images/icons/purple.png" alt="purple crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">purple</span>
    </div>

    <!-- YELLOW -->
    <div class="p4-crayon" data-color="yellow" style="--crayon-color:#eab308;">
        <img src="Media/images/icons/yellow.png" alt="yellow crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">yellow</span>
    </div>

    <!-- ORANGE -->
    <div class="p4-crayon" data-color="orange" style="--crayon-color:#f97316;">
        <img src="Media/images/icons/orange.png" alt="orange crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">orange</span>
    </div>

    <!-- LIGHT BLUE -->
    <div class="p4-crayon" data-color="lightblue" style="--crayon-color:#38bdf8;">
        <img src="Media/images/icons/lightblue.png" alt="light blue crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">light blue</span>
    </div>

    <!-- PINK -->
    <div class="p4-crayon" data-color="pink" style="--crayon-color:#ec4899;">
        <img src="Media/images/icons/pink.png" alt="pink crayon" class="p4-crayon-icon">
        <span class="p4-crayon-label">pink</span>
    </div>
</div>

                </div>
            </div>
        </div>

    </section>

    <!-- KẾT QUẢ + NÚT ĐIỀU HƯỚNG -->
    <div class="bottom-nav">
    <button id="btnPrev"
            class="nav-arrow nav-arrow-left"
            onclick="goPrevPart()"
            aria-label="Previous part">
        <span class="arrow-icon">‹</span>
    </button>

    <button id="btnNext"
            class="nav-arrow nav-arrow-right"
            onclick="goNextPart()"
            aria-label="Next part">
        <span class="arrow-icon">›</span>
    </button>
</div>


    <div class="submit-row">
        <button id="btnSubmit" type="button" class="primary">Nộp toàn bài</button>
    </div>
<!-- POPUP XÁC NHẬN NỘP BÀI (LISTENING) -->
<div id="lsConfirmSubmit" class="rw-confirm-overlay">
  <div class="rw-confirm-modal">
    <button type="button" class="rw-confirm-close">×</button>
    <div class="rw-confirm-title">THÔNG BÁO</div>
    <p class="rw-confirm-message">
      Bạn có chắc chắn muốn nộp bài thi không?
    </p>
    <button type="button" class="rw-confirm-submit">NỘP BÀI</button>
  </div>
</div>

</div> <!-- /.exam-shell -->
<!-- POPUP KẾT QUẢ KHIÊN -->
<div id="shieldResult" class="shield-overlay hidden">
  <div class="shield-modal">
    <button type="button" class="shield-close" onclick="closeShieldResult()">×</button>
    <h2>Chúc mừng bạn đã đạt được</h2>
    <div id="shieldIcons" class="shield-icons"></div>
    <p class="shield-count"><span id="shieldCount">0</span> khiên</p>
  </div>
</div>

<script>
  (function () {
    const crayons = document.querySelectorAll('#part4 .p4-crayon');
    const zones = document.querySelectorAll('#part4 .p4-drop-zone');
    let dragged = null;

    crayons.forEach(crayon => {
      crayon.setAttribute('draggable', 'true');

      crayon.addEventListener('dragstart', function () {
        dragged = crayon;
        crayon.classList.add('dragging');
      });

      crayon.addEventListener('dragend', function () {
        crayon.classList.remove('dragging');
        dragged = null;
      });
    });

    zones.forEach(zone => {
      zone.addEventListener('dragover', function (e) {
        e.preventDefault();
        zone.classList.add('over');
      });

      zone.addEventListener('dragleave', function () {
        zone.classList.remove('over');
      });

      zone.addEventListener('drop', function (e) {
        e.preventDefault();
        zone.classList.remove('over');
        if (!dragged) return;

        const crayonColor = getComputedStyle(dragged)
          .getPropertyValue('--crayon-color')
          .trim();

        zone.dataset.color = dragged.dataset.color;
        zone.style.setProperty('--zone-color', crayonColor);
      });

      // Double–click để xóa màu vùng đó
      zone.addEventListener('dblclick', function () {
        zone.dataset.color = '';
        zone.style.removeProperty('--zone-color');
      });
    });
  })();
</script>

<script src="script-dragdrop.js"></script>

<script src="yle.js"></script>
</body>
</html>
